import{_ as d,r as s,o as n,c as a,b as e,d as t,e as l,a as o}from"./app-c80e1060.js";const i="/assets/0导出SHP编码-18b88dae.png",r="/assets/0光栅图像_格式错误提示-a95f9826.png",p="/assets/0ArcGIS中央经线调整-83bab65c.png",g="/assets/0导出到数据框-f2f5ae51.png",u="/assets/0SBOX中央经线调整-010e0cf3.png",h="/assets/0Win10缩放布局-42718727.png",m="/assets/0Win10模糊修复-a321d959.png",b="/assets/0CAD设置DPI-1fce4d6f.png",_={},I=o('<h1 id="常见问题" tabindex="-1"><a class="header-anchor" href="#常见问题" aria-hidden="true">#</a> 常见问题</h1><h2 id="关于乱码" tabindex="-1"><a class="header-anchor" href="#关于乱码" aria-hidden="true">#</a> 关于乱码</h2><p>乱码主要出现在 <code>SHP</code> 格式中，这种文件格式比较古早，字段名长度最多只能有 10 个字节，字节≠字数，这涉及编码问题，我们常用的编码有两种：<code>UTF-8</code> 和 <code>GBK</code></p><ul><li><code>UTF-8</code>：一个英文字母占 1 字节，一个汉字占 3 字节，这意味着该编码下的字段名最多 3 个汉字。</li><li><code>GBK</code>（CP936）：英文字母占 1 字节，汉字占 2 字节，这就可以让字段名支持最多 5 个汉字。</li></ul><p>看起来是 <code>GBK</code> 更有优势，但实际上 <code>UTF8</code> 有更好的兼容性，几乎不会出现乱码，如果对字段名中文长度没有特别要求，<strong>建议采取 <code>UTF8</code> 编码</strong> ，这也是导出SHP的默认设置。</p><p><img src="'+i+'" alt="image-20230809111040007"></p><p>如果 <code>GBK</code> 导出的 <code>SHP</code> 加载到 <code>ArcGIS</code> 中出现乱码，这可能并不是数据有问题，而是软件原因，<code>ArcGIS 10.2</code> 及以上的版本中汉字经常乱码，可尝试按照下面的方式处理（以 <code>ArcGIS 10.2.1</code> 为例）：</p>',7),f={href:"https://downloads.esri.com/Support/downloads/other_/ArcGIS-1021-DT-SSDCP-Patch.msp",target:"_blank",rel:"noopener noreferrer"},F=o(`<li><p>新建一个 <code>bat</code> 文件，如：<strong>ChangeCodePage.bat</strong>，粘贴下面的代码并保存；</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>@ECHO OFF
IF <span class="token string">&quot;%1&quot;</span><span class="token operator">==</span><span class="token string">&quot;&quot;</span> GOTO :EOF
reg <span class="token function">add</span> HKEY_CURRENT_USER<span class="token punctuation">\\</span>Software<span class="token punctuation">\\</span>ESRI<span class="token punctuation">\\</span>Desktop10.2<span class="token punctuation">\\</span>Common<span class="token punctuation">\\</span>CodePage /v dbfDefault /t REG_SZ /d <span class="token number">936</span>  /f
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>以管理员权限执行上面的文件。</p></li><li><p>注意，针对不同版本的ArcGIS ，需要修改 <code>..\\Desktop10.2</code> 到匹配的版本。</p></li>`,3),k=o('<h2 id="关于打印" tabindex="-1"><a class="header-anchor" href="#关于打印" aria-hidden="true">#</a> 关于打印</h2><p>大影像、在线地图以及字段标注是动态绘制的，不支持打印，想要打印可参考下面的方法：</p><ul><li><p>大影像：通过光栅图像加载即可打印。</p><blockquote><ul><li>影像格式不受支持的，可先导出为支持的格式</li><li>影像太大光栅图像无法加载的，可通过裁剪工具裁剪后再加载</li></ul></blockquote></li><li><p>在线地图：直接下载，之后处理方式同大影像</p></li><li><p>字段标注：标注转为注记即可</p></li></ul><div class="custom-container warning"><p class="custom-container-title">注意</p><p>在线地图下载并非级别越高越好，注意根据应用场景判别。实际情况是国内几乎没有超过18级的在线地图，即使显示提示是20级，也只是18或更低级别的影像重采样到20级的，实际分辨率并没有提升，没必要去追求高级别，这点注意甄别。</p></div><h2 id="关于tiff" tabindex="-1"><a class="header-anchor" href="#关于tiff" aria-hidden="true">#</a> 关于TIFF</h2><p><code>TIFF(TIF)</code>是一种常见的图像文件格式，它可以存储多个图像和元数据，<code>CAD</code> 的光栅图像也支持插入 <code>TIF</code> 图像，但在实际使用过程中会发现一些 <code>TIF</code> 并不能插入 <code>CAD</code> 中，提示如下：</p><p><img src="'+r+'" alt="image"></p><p>出现这种情况，除却文件损坏等原因，很有可能是该图像不是传统的 <code>TIF</code> 图像，而是 <code>BigTIFF</code> ，在此简单说明几个概念：</p><table><thead><tr><th>格式</th><th>说明</th></tr></thead><tbody><tr><td><code>TIFF</code></td><td>传统的图像文件格式，<code>TIF</code> 格式可以存储32位深度的图像文件，但是文件大小不能超过4GB。<strong>（CAD支持）</strong></td></tr><tr><td><code>BigTIFF</code></td><td>为打破 <code>TIF</code> 的4GB大小限制而生，使用了64位的地址空间，允许文件大小超过4GB。<strong>（CAD不支持）</strong></td></tr><tr><td><code>GeoTIFF</code></td><td>一种特殊的 <code>TIF</code> 文件格式，它无需坐标文件 <code>tfw</code> ，自身即包含了地理参考信息，使得<code>GIS</code> 软件能够更容易地识别图像的地理位置和坐标系。（<strong>CAD不一定支持</strong>，具体取决于文件是否是<code>BigTIFF</code> ）</td></tr></tbody></table><p>由于上述格式的后缀名都是 <code>tif</code> 或 <code>tiff</code> ，无法简单通过后缀判别，若出现无法光栅图像无法加载的情况，可尝试通过以下方法解决：</p><ol><li>通过 <code>gimg</code> 加载图像；</li><li>若图像小于4GB，直接导出为 <code>TIFF</code>；</li><li>若图像大于4GB，通过裁剪将其分割，导出为多个 <code>TIFF</code>；</li><li>将导出的结果通过光栅图像加载。</li></ol><h2 id="关于投影" tabindex="-1"><a class="header-anchor" href="#关于投影" aria-hidden="true">#</a> 关于投影</h2><p>关于投影的问题比较多，在此简单甄别几个概念：<code>定义投影</code>、<code>投影</code>和<code>动态投影</code></p><p>首先明确，不管是什么格式的空间矢量数据，都会以保存<strong>坐标值</strong>，这是进行投影的基础</p><ul><li><p><strong>定义投影</strong>：更新用于标识当前坐标系的元数据，<strong>数据坐标值不发生改变</strong>；</p><blockquote><p>定义投影（Define Projection）适用于数据空间位置准确、坐标系明确，只是缺乏空间参考（投影信息）的情况，相当于是给数据添加一个标签，让GIS软件知道数据是哪种投影。</p></blockquote></li><li><p><strong>投影</strong>：将数据从一种坐标系投影到另一种坐标系，<strong>数据坐标值发生改变</strong>；</p><blockquote><p>投影（Project）或者说投影变换，适用于将一种坐标转换成另一种坐标，进行投影变换往往需要相应的转换参数，同椭球体下转换不需要参数。</p></blockquote></li><li><p><strong>动态投影</strong>：将不同坐标系的数据投影到同一个坐标系下显示，而<strong>数据坐标值不改变</strong>，该过程一般是自动进行，无需用户操作。</p><blockquote><p>以 <code>ArcMap</code> 举例，当数据框定义了坐标系时，该数据框下所有数据会被动态的投影到该坐标系下，参考以下步骤观察其变化：</p><ul><li>新打开一个文档，在未添加数据时，其数据框是没有坐标系的；</li><li>向数据框添加一个图层，如果该图层定义了坐标系，则ArcGIS会默认以该坐标系作为数据框坐标系；</li><li>继续向数据框添加图层，如果新图层坐标系和数据框坐标系不一致，ArcGIS会尝试将新图层<strong>动态投影</strong>到数据框坐标系上，但该数据的坐标值并未改变，这就是动态投影的作用。</li></ul></blockquote></li></ul><p>可见，只有投影（投影变换）可以实际上改变数据的坐标值，回到CAD中：</p><ul><li><p>定义投影：也就是插件功能中的<strong>设置空间参考</strong>，并不会改变数据坐标值。</p></li><li><p>动态投影：CAD原生不支持，这导致不同的投影下的数据，在CAD中无法套合，软件支持在导入数据时自动进行投影转换。</p><blockquote><p>自动进行投影转换的前提是设置了全局投影，具体参见 <code>空间分析 &gt; 全局空间参考</code>。</p></blockquote></li><li><p>投影变换：参见 <code>空间分析 &gt; 坐标转换 &gt; 投影转换</code>。</p></li></ul><h2 id="投影跨带" tabindex="-1"><a class="header-anchor" href="#投影跨带" aria-hidden="true">#</a> 投影跨带</h2><p>国内常用 <code>CGCS2000</code> 的3度带投影，但很多时候我们数据是跨带的，并不完全在同一个投影带内，在线地图动态定义投影后，将只显示所定义投影带范围内的地图，这就导致超出该投影带的部分地图没显示，想要将数据和地图完全套合并显示，可参考以下操作：</p><p>将数据转换到能完全覆盖它的投影带上，在此以跨越37度和38度带的数据，通过<code>ArcGIS</code>操作举例：</p><ol><li><p>ArcGIS中 加载数据后，<code>数据框(图层)右键 &gt; 属性 &gt; 坐标系 &gt; 定义37.5度的中央经线</code></p><p><img src="'+p+'" alt="image"></p><blockquote><p>可直接在37或38度的投影基础上修改，注意上图红色部分是修改过的值</p></blockquote></li><li><p>将数据框坐标系定义到上述投影后，导出图层，注意<strong>勾选数据框</strong>的坐标系</p><p><img src="'+g+'" alt="image-20230808151058568"></p><blockquote><p>这一步的目的是对数据进行投影变换，也可通过其他方式实现，在此不予赘述</p></blockquote></li><li><p>将导出的数据加载到CAD中，此时数据的坐标系就是我们刚刚定义的 37.5</p></li><li><p>在线地图投影选自定义，如下设置即可：</p><p><img src="'+u+'" alt="image"></p><p>这样，就将数据和地图都定义到了一个能完整显示的投影带，二者可完全套合。</p></li></ol><div class="custom-container tip"><p class="custom-container-title">提示</p><ul><li>如果只是浏览数据，也可将投影定义为全球有效的地理坐标系，如<code>WGS84</code> ，自然不存在跨带问题。</li><li>投影变换还有一种更简单的方式，就是在CAD中将数据框（图层）的投影定义为需要的值，再加载数据，会提示执行投影变换，具体参见：<code>空间分析 &gt; 空间参考</code></li></ul></div><h2 id="dpi" tabindex="-1"><a class="header-anchor" href="#dpi" aria-hidden="true">#</a> DPI</h2><p>软件在启用了 Windows 缩放后，可能出现文字模糊、布局压盖、混乱等问题，这里做一个简单说明：</p><p>首先是设置缩放的方法（Win10）:</p><ul><li><p><code>桌面右键</code> &gt; <code>显示设置</code> &gt; <code>缩放和布局</code> &gt; <code>更改文本、应用等项目的大小</code></p><p><img src="'+h+'" alt="image-20230810151336698"></p></li><li><p>下方还有个 <code>高级缩放设置</code>，打开后有个选项：允许Windows尝试修复应用，使其不模糊</p><p><img src="'+m+'" alt="image-20230810151429776"></p></li></ul><p>开启缩放后，就可能出现文字模糊、布局压盖、混乱等问题，同时模糊修复也会对软件产生影响：</p><table><thead><tr><th style="text-align:center;"></th><th style="text-align:center;">开启模糊修复</th><th style="text-align:center;">关闭模糊修复</th></tr></thead><tbody><tr><td style="text-align:center;"><strong>文字</strong></td><td style="text-align:center;">文字被缩放，清晰</td><td style="text-align:center;">文字被缩放，模糊</td></tr><tr><td style="text-align:center;"><strong>图标</strong></td><td style="text-align:center;">图标维持原状，清晰</td><td style="text-align:center;">图标被缩放，模糊</td></tr><tr><td style="text-align:center;"><strong>布局</strong></td><td style="text-align:center;">布局和文字缩放比例不均，相互压盖、布局混乱</td><td style="text-align:center;">整个软件被同步缩放，布局正常</td></tr></tbody></table><p>可见在设置了缩放后，要么是字体清晰但界面混乱，要么是界面正确但是模糊，目前来说二者不可调和，按自己需要取舍即可。</p><p>除去在 Windows 中的全局设置，也可以单独设置CAD软件的缩放行为：</p><ul><li><p><code>acad.exe</code> &gt; <code>属性</code> &gt; <code>兼容性</code> &gt; <code>更改高DPI设置</code></p><p><img src="'+b+'" alt="image-20230810153802264"></p></li><li><p>这儿有两个设置：<code>程序DPI</code> 和 <code>高DPI缩放替代</code></p><ul><li>程序DPI：勾选后能确保布局正常</li><li>高DPI缩放替代：勾选后能确保清晰</li><li>程序DPI和高DPI同时勾选：将忽略系统设置的缩放，维持原始的高清状态</li></ul></li></ul><p>上面的测试均基于 <code>AutoCAD2024</code>，不同版本可能略有出入。你可以在上述设置中自由组合，找出最适合自己的，如果有更好的方案，欢迎提出建议。</p>',32);function D(S,x){const c=s("ExternalLinkIcon");return n(),a("div",null,[I,e("ol",null,[e("li",null,[e("p",null,[t("下载官方补丁并安装： "),e("a",f,[t("ArcGIS-1021-DT-SSDCP-Patch.msp"),l(c)]),t("；")])]),F]),k])}const A=d(_,[["render",D],["__file","faq.html.vue"]]);export{A as default};
