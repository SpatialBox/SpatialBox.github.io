import{_ as t,o as d,c as e,a as i}from"./app-c80e1060.js";const o="/assets/0拓扑验证-febdc923.png",c="/assets/0拓扑验证_参数-db632bb4.png",a="/assets/0拓扑检查-0b280bfd.png",r="/assets/0拓扑检查规则-6820b93d.png",l="/assets/0拓扑检查_示例-d72457f0.png",p="/assets/0拓扑检查_预览-f4275d0c.png",s="/assets/0空间选择-0a800102.png",n="/assets/0空间选择_选择方法-b5831819.png",h="/assets/0空间选择_空间方法-b36b7928.png",g="/assets/0空间连接-0d6e49e9.png",m="/assets/0空间连接_预览-e13ff11c.png",u="/assets/0空间连接_示例1-178d4785.png",_="/assets/0空间连接_示例2-f65942cb.png",b="/assets/0空间连接_示例3-78b96395.png",f="/assets/0空间连接_示例4-a7e22dee.png",x="/assets/0空间参考1-2102d93e.png",B="/assets/0空间参考2-88a9026b.png",v="/assets/0空间参考_状态栏-95bfd1f7.png",C="/assets/0空间参考_自定义坐标系-9831fc2d.png",y="/assets/0空间参考_图层-ffde7f95.png",k="/assets/0坐标转换-3a64dbce.png",D={},T=i('<h1 id="空间分析" tabindex="-1"><a class="header-anchor" href="#空间分析" aria-hidden="true">#</a> 空间分析</h1><p>空间分析是进行空间操作的主要模块，支持常用的 <code>拓扑验证</code> <code>拓扑检查</code> <code>空间连接</code> <code>空间选择</code> 等，并具备融合、缓冲、边界几何等一系列空间分析工具。</p><h2 id="拓扑验证" tabindex="-1"><a class="header-anchor" href="#拓扑验证" aria-hidden="true">#</a> 拓扑验证</h2><p>命令 <code>TV</code>，一般用于修复图形在<strong>微观</strong>层面的一些错误，以规范图形质量。</p><p>同时拓扑验证是执行拓扑检查的基础，一些未通过验证的数据会导致拓扑检查失败，正确理解验证对规范空间数据质量很重要。</p><p><img src="'+o+'" alt="image"></p><div class="custom-container warning"><p class="custom-container-title">注意</p><p>验证会对要素折点进行聚类处理，彼此间距离在指定范围内的折点被认为表示同一个位置，换言之，在容差范围内的折点会被捕捉到一起，处于拓扑容差范围内的所有折点在验证过程中均可能轻微移动。所以，<strong>拓扑容差应设置在不影响数据质量的范围内</strong>。</p></div><h4 id="拓扑验证步骤" tabindex="-1"><a class="header-anchor" href="#拓扑验证步骤" aria-hidden="true">#</a> 拓扑验证步骤</h4><ol><li><p>在 <code>图层列表</code> 中勾选需要加入验证的图层，并设置其 <code>锁定状态</code> 和 <code>优先级</code> 。</p></li><li><p>在 <code>验证设置</code> 中勾选要验证的项目，在 <code>容差设置</code> 中设置合适的容差 。</p><p><img src="'+c+'" alt="image"></p></li><li><p>点击 <code>框选验证</code> 或 <code>全部验证</code> ，等待验证完成即可。</p></li><li><p><code>属性过滤</code> 可按属性排除指定图元，使其不参与验证。</p></li></ol><div class="custom-container tip"><p class="custom-container-title">图层列表</p><ul><li>在图层列表中勾选图层，其要素将加入拓扑验证</li><li>锁定、冻结、关闭的图层将不出现在列表中；</li><li>优先级：优先级高的图层将有更少的要素改动，最高为1，最低10，单击优先级数字可调整；</li><li>锁定：右键可设置锁定，锁定图层后，该层的要素将尽可能避免更改： <ul><li>锁定层只执行要素验证，不参与相邻验证；</li><li>锁定层比未锁定层有更高的优先级；</li></ul></li></ul></div><div class="custom-container tip"><p class="custom-container-title">要素验证</p><p>修复<strong>要素自身</strong>问题，如重合点、自相交、环走向、尖锐角等，重合点是验证默认项，此外有以下可选项：</p><ul><li>添加自相交点：要素若存在自相交，其交点处将被添加节点；</li><li>移除共线节点：若节点到其前后节点所构成线段的距离小于拓扑容差，这三点将被认为是“共线”的，中间节点将被移除；</li><li>移除尖角节点：若节点处夹角小于角度容差，该节点将被移除；</li><li>调整环走向：闭合要素将调整其环走向为设置值；</li><li>注：共线节点和相交节点矛盾时，优先满足相交节点</li></ul></div><div class="custom-container tip"><p class="custom-container-title">相邻验证</p><p>修复和<strong>相邻要素间</strong>的问题，如相交缺节点、相邻缺节点等：</p><ul><li>相交相交节点：若要素与其他要素相交，其交点处将被添加节点</li><li>添加相邻节点：若节点到相邻要素节点或边界距离在容差范围内，则该点将被吸附到相邻的节点或边界上</li><li>捕捉到锁定层：节点将被捕捉到附近锁定图层的线段上，受距离容差影响，开启锁定图层后生效</li></ul></div><div class="custom-container tip"><p class="custom-container-title">拓扑容差</p><p>拓扑容差用于控制折点位移的范围，可在验证设置-容差设置中设置容差，具体分为3种：</p><ul><li>距离容差：该范围内所有折点和边界将被视为相同或重合，落在容差范围内的折点和端点将被捕捉到一起；</li><li>角度容差：折点处夹角小于该值的顶点将被移除；</li><li>共线容差：点到相邻两点线段的垂直距离小于该值的将视为3点共线，中间节点将被移除。</li></ul></div><div class="custom-container warning"><p class="custom-container-title">注意事项</p><ul><li>可参与验证的要素类型有：多段线(<code>Polyline</code>)，二维多段线(<code>Polyline2D</code>)</li><li>验证过程会对弧段进行强制转换，转换设置参考 几何转换设置</li></ul></div><h2 id="拓扑检查" tabindex="-1"><a class="header-anchor" href="#拓扑检查" aria-hidden="true">#</a> 拓扑检查</h2><p>命令 <code>TC</code>，拓扑检查 一般用于图形的空间关系检查，按指定的规则检查图形数据，列出不满足规则的项供用户快速定位并修改，以完善数据质量，和自动执行的拓扑验证不同，拓扑检查更<strong>宏观</strong> ，检查到的问题一般需要人工核实修改。</p><p><img src="'+a+'" alt="image"></p><p>ArcGIS等软件在进行拓扑检查前，为确保节点的有效性，默认进行了点聚类处理，这个过程也就是本软件的拓扑验证功能</p><p>因此，强烈建议执行检查前对要检查的图层先执行 <strong>拓扑验证</strong></p><h4 id="拓扑检查步骤" tabindex="-1"><a class="header-anchor" href="#拓扑检查步骤" aria-hidden="true">#</a> 拓扑检查步骤</h4><ol><li><p>在检查面板中点击 <code>添加</code> ，设置检查规则，确定后该规则添加至列表，可添加多个规则：</p><p><img src="'+r+'" alt="image-20231124193722371"></p><blockquote><ul><li>配置好的规则可 <strong>保存</strong> 到本地，下次使用时 <strong>加载</strong> 即可，也可以将配置文件复制给他人使用。</li><li>筛选可对图层中的实体进行简单过滤，语法参见 按属性选择。</li><li>注意：若多个拓扑规则涉及相同图层，且都有筛选器，则将取其并集进行检查。</li></ul></blockquote></li><li><p>在规则列表中勾选需要检查的项（可多选），勾选后执行检查即可：</p><p><img src="'+l+'" alt="image"></p></li><li><p>检查完成后，结果列表会列出错误信息，双击节点可定位至相应错误项：</p><p><img src="'+p+'" alt="image"></p><blockquote><p>所有的检查结果均保存在 <code>_TopoCheck_Err</code> 图层中，双击也是定位到该图层中的图形，可按需要删除或关闭该图层，也可将该图层作为检查结果导出为其他格式，反馈第三方修改。</p></blockquote></li><li><p>修改完成后可通过 <code>清除检查结果</code> 来清空错误列表，也可直接删除 <code>_TopoCheck_Err</code> 图层；</p></li></ol><div class="custom-container tip"><p class="custom-container-title">提示</p><ul><li>为确保图形几何有效，提高拓扑检查结果准确性，强烈建议执行检查前对要检查的图层先执行 <strong>拓扑验证</strong> 。</li><li>开启筛选后，对图形进行属性值过滤将花费一些时间，请耐心等待。</li></ul></div><h4 id="拓扑检查规则" tabindex="-1"><a class="header-anchor" href="#拓扑检查规则" aria-hidden="true">#</a> 拓扑检查规则</h4><h5 id="单图层规则" tabindex="-1"><a class="header-anchor" href="#单图层规则" aria-hidden="true">#</a> 单图层规则</h5><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>不闭合</td><td>不闭合的多段线将被判定为错误</td></tr><tr><td>不能有碎线</td><td>长度小于容差的多段线将被判定为错误</td></tr><tr><td>不能有碎面</td><td>面积小于容差的多段线将被判定为错误</td></tr><tr><td>最小节点间距</td><td>节点距离小于容差的要素将被判定为错误</td></tr><tr><td>最大节点间距</td><td>节点距离大于容差的要素将被判定为错误</td></tr><tr><td>不能有锐角</td><td>夹角小于容差的要素将被判定为错误</td></tr><tr><td>不能有钝角</td><td>夹角大于容差的要素将被判定为错误</td></tr><tr><td>不能重叠</td><td>重叠要素将被判定为错误</td></tr><tr><td>不能有空隙</td><td>要素间的空隙(空洞)要素将被判定为错误</td></tr></tbody></table><h5 id="复合规则" tabindex="-1"><a class="header-anchor" href="#复合规则" aria-hidden="true">#</a> 复合规则</h5><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>要素间距</td><td>要素间隔距离大于0且小于容差的要素将被判定为错误</td></tr><tr><td>不能与其他要素重叠</td><td>图层中的要素不能与图层B要素重叠，否则视为错误</td></tr><tr><td>不能与其他要素重叠</td><td>图层中的要素不能与图层B要素重叠，否则视为错误</td></tr><tr><td>必须包含</td><td>图层中的要素必须包含图层B要素，否则视为错误</td></tr><tr><td>不能包含</td><td>图层中的要素不能包含图层B要素，否则视为错误</td></tr><tr><td>必须被包含</td><td>图层中的要素必须被图层B要素包含，否则视为错误</td></tr><tr><td>必须包含一个</td><td>图层中的要素必须包含图层B的一个要素，否则视为错误</td></tr><tr><td>必须被一个包含</td><td>图层中的要素必须被图层B的一个要素包含，否则视为错误</td></tr><tr><td>必须与一个相交</td><td>图层中的要素必须与图层B的一个要素相交，否则视为错误</td></tr><tr><td>边界必须被其他要素边界覆盖</td><td>图层中的要素边界必须被图层B要素边界覆盖，否则视为错误</td></tr></tbody></table><h2 id="空间选择" tabindex="-1"><a class="header-anchor" href="#空间选择" aria-hidden="true">#</a> 空间选择</h2><p>命令 <code>KJXZ</code>，利用 <code>空间选择</code> 工具，您可以根据要素相对于另一图层要素的位置来进行选择。 您可使用多种选择方法，选择与同一图层或其他图层中的要素接近或重叠的点、线或面要素。</p><p><img src="'+s+'" alt="image"></p><h4 id="空间选择步骤" tabindex="-1"><a class="header-anchor" href="#空间选择步骤" aria-hidden="true">#</a> 空间选择步骤</h4><ol><li><p>根据需要选取 <code>选择方法</code> ，默认为 <code>创建新选择内容</code>。</p><p><img src="'+n+'" alt="image"></p></li><li><p>在图层列表中勾选想要选择的 <code>目标图层</code> ，可以选择多个。</p></li><li><p>在 <code>源图层</code> 中选择用于选取的图层。</p></li><li><p>按需要勾选 <code>使用所选要素</code> ，勾选后可 <code>刷新</code> 。</p></li><li><p>在 <code>空间选择方法</code> 中选取空间关系规则。</p><p><img src="'+h+'" alt="image"></p></li><li><p>按需要设置 <code>搜索距离</code> ，点击 <code>应用</code> 即可完成选择。</p></li></ol><h2 id="空间连接" tabindex="-1"><a class="header-anchor" href="#空间连接" aria-hidden="true">#</a> 空间连接</h2><p>命令 <strong><code>KJLJ</code></strong>，<strong>空间连接</strong>可利用不同图层中各要素的空间关系为字段赋值，顺带也兼具部分<strong>拓扑检查</strong>的功能。</p><p><img src="'+g+'" alt="image"></p><h4 id="空间连接步骤" tabindex="-1"><a class="header-anchor" href="#空间连接步骤" aria-hidden="true">#</a> 空间连接步骤</h4><ol><li><p>打开 <code>空间连接</code> 面板，设置 <code>输入图层</code> <code>输入字段</code> <code>目标图层</code> <code>目标字段</code> 。</p></li><li><p>选择 <code>空间关系</code> ，可按需求设置容差，默认为 0.0001 米。</p></li><li><p>点击 <code>验证</code> ，结果列表中会列出匹配情况，单击可定位查看相关图形。</p><p><img src="'+m+'" alt="image"></p></li><li><p>检查无误后，点击 <code>保存</code> 即可将结果列表中的内容保存到字段中。</p></li><li><p><code>搜索</code> 可对结果列表进行关键字检索，<code>自动定位</code> 可在单击节点时定位到图形。</p></li><li><p>若图层和字段列表中的值和实际不符，可点击 <code>刷新</code> 来更新。</p></li></ol><p><strong>空间连接方法</strong></p><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>输入要素包含目标要素</td><td>大面对小面、点、文字、块、线等赋值</td></tr><tr><td>目标要素包含输入要素</td><td>点、文字、块、线等给面赋值</td></tr><tr><td>空间距离赋值</td><td>按要素的空间距离赋值，优先级包含&gt;相交&gt;相邻，容差为查找范围</td></tr><tr><td>包含求和</td><td>目标图层包含输入图层，可对输入字段进行求和 （只对数字有效）</td></tr><tr><td>字段追加</td><td>目标图层包含输入图层，可对输入字段进行追加 （可设置连接符）</td></tr><tr><td>文字内容提取到面</td><td>输入为文字层，目标为面图层，将文字内容提取到面的指定字段 （可设置连接符）</td></tr></tbody></table><h4 id="空间连接示例" tabindex="-1"><a class="header-anchor" href="#空间连接示例" aria-hidden="true">#</a> 空间连接示例</h4><p>将注记内容添加到图形属性 ，在此注记为文字 （在FW注记图层），图形为闭合多段线 （在FW图层）</p><ol><li><p>打开 FW 和 FW注记 图层的属性表，分别添加 Text 字段 ，如已有字段可忽略该步骤。</p><p><img src="'+u+'" alt="image"></p></li><li><p>打开 <code>字段计算器</code> ，计算 Text 字段的值，表达式为 DBOBJECT.TextString，可将文字内容提取到字段中。</p><p><img src="'+_+'" alt="image"></p></li><li><p>打开 <code>空间连接</code> 面板，若图层和字段和上述一致，可如下设置，空间关系选 <code>目标要素包含输入要素</code> 。</p><p><img src="'+b+'" alt="image"></p></li><li><p>设置好后 <code>验证</code> ，下方列表中会提示验证结果，本例中有8个闭合多段线未包含文字注记，可定位检查修改。</p><p><img src="'+f+'" alt="image"></p></li><li><p>确认后 <code>保存</code> 即可。</p></li></ol><h2 id="空间参考" tabindex="-1"><a class="header-anchor" href="#空间参考" aria-hidden="true">#</a> 空间参考</h2><p><code>AutoCAD</code> 使用的是以固定坐标定位数据的 2D 和 3D 笛卡尔坐标系。其 x、y 和 z 坐标本质上并不是地理位置，而是相对于任一几何原点 (0,0,0) 的位置。为建立和 GIS 数据的转换，x 轴可以认为是向东的方向，y 轴可以认为是向北的方向，由此建立空间参考。</p><p>本软件的空间参考（定义投影）功能需要用户清楚自己所使用数据的坐标系，定义投影只是将该坐标系的参数保存下来，在格式转换和数据交互时使用，并<strong>不会修改图形</strong>的坐标值，若要实际上修改坐标值，请参考 <strong><code>投影变换</code></strong>。</p><h4 id="全局空间参考" tabindex="-1"><a class="header-anchor" href="#全局空间参考" aria-hidden="true">#</a> 全局空间参考</h4><p>设置全局空间参考后，在一些需要坐标系的场景（如导出 <code>KML</code> ）会自动使用该坐标系，导出的空间数据也会自动定义为该坐标系。</p><ol><li><p>图层根节点右键，选择 <code>设置投影</code> 。</p><p><img src="'+x+'" alt="image"></p></li><li><p>在弹出窗口中选择需要的投影 <code>确定</code> 即可 （也可双击投影节点直接确定）。</p><p><img src="'+B+'" alt="image"></p><blockquote><ul><li>搜索框可对坐标系名称进行关键词搜索；</li><li>选择界面列出了常用的地理坐标系和投影坐标系，选中坐标系后会列出参数；</li><li>常用的坐标系可添加至收藏夹，方便下次使用；</li><li>有必要的话，可通过 <code>自定义</code> 设置坐标系</li></ul></blockquote></li><li><p>投影设置成功后会有提示，同时 AutoCAD 状态栏的图形坐标前会显示当前投影名称，未定义投影则显示 <code>NOPRJ</code>；</p><p><img src="'+v+'" alt="image"></p></li><li><p>命令 <code>SPRJ</code> ，也可以设置投影。</p></li></ol><h4 id="自定义坐标系" tabindex="-1"><a class="header-anchor" href="#自定义坐标系" aria-hidden="true">#</a> 自定义坐标系</h4><p>坐标系选择界面左下角，可通过 <code>自定义</code> 设置参数来定义其他坐标系</p><p><img src="'+C+'" alt="image"></p><ul><li>自定义坐标系未被收入坐标系数据库，系统将无法判断其有效范围，使用时需注意精度</li></ul><h4 id="图层空间参考" tabindex="-1"><a class="header-anchor" href="#图层空间参考" aria-hidden="true">#</a> 图层空间参考</h4><p>图层空间参考用处和全局空间参考类似，只是具有更高优先级，在导出数据等场景下，若图层和全局都有设置，会优先使用图层空间参考。</p><p>设置方法：<code>图层右键 &gt; 属性 &gt; 设置投影 &gt; 确定</code>。</p><p><img src="'+y+'" alt="image"></p><h2 id="坐标转换" tabindex="-1"><a class="header-anchor" href="#坐标转换" aria-hidden="true">#</a> 坐标转换</h2><p>命令：<code>ZBZH</code>，支持四参数转换，七参数转换，投影变换等</p><p><img src="'+k+'" alt="image-20231015193420703"></p><blockquote><p>该功能测试中，使用时请注意检查精度，若有疑问径向客服反馈</p></blockquote><h4 id="四参数转换" tabindex="-1"><a class="header-anchor" href="#四参数转换" aria-hidden="true">#</a> 四参数转换</h4><p>适用于二维平面转换，可通过公共点（至少2组）计算四参数，并通过四参数对实体进行转换，高程维持不变</p><h4 id="七参数转换" tabindex="-1"><a class="header-anchor" href="#七参数转换" aria-hidden="true">#</a> 七参数转换</h4><p>适用于三维转换，可通过公共点（至少3组）计算七参数，对实体进行转换</p><h4 id="投影转换" tabindex="-1"><a class="header-anchor" href="#投影转换" aria-hidden="true">#</a> 投影转换</h4><p>适用于各种投影变换，换带计算等，只需输入源坐标系及目标坐标系，即可对图元进行转换</p><h4 id="关于坐标转换" tabindex="-1"><a class="header-anchor" href="#关于坐标转换" aria-hidden="true">#</a> 关于坐标转换</h4><p>坐标转换会实际上修改数据的坐标值，本软件采取的坐标转换均是逐点进行。</p><p>CAD的数据结构较为繁杂，很多实体不能简单通过点来完整描述，转换过程不可避免的会造成一些数据或者精度上的损失，目前支持的实体及转换规则如下：</p><table><thead><tr><th>图元</th><th>备注</th></tr></thead><tbody><tr><td>点（<code>DBPoint</code>）</td><td>逐点转换，精度无损</td></tr><tr><td>线（<code>Line</code>）</td><td>逐点转换，精度无损</td></tr><tr><td>多段线（<code>Polyline</code>）</td><td>逐点转换，弧段凸度维持原状，线宽按转换前后的尺度缩放</td></tr><tr><td>二维多段线（<code>Polyline2d</code>）</td><td>同多段线</td></tr><tr><td>圆（<code>Circle</code>）</td><td>按圆心转换，半径将按转换前后的尺度缩放<br>对于投影转换而言，圆的转换是不可能精确的，A坐标系下的圆，投影到B坐标系可能变成椭圆，确保其数据结构，就不可能确保其圆周精度</td></tr><tr><td>弧段（<code>Arc</code>）</td><td>同圆</td></tr><tr><td>单行文字（<code>DBText</code>）</td><td>通过基点进行转换，字高按转换前后的尺度缩放</td></tr><tr><td>多行文字（<code>MText</code>）</td><td>同单行文字</td></tr><tr><td>填充（<code>Hatch</code>）</td><td>精度取决于填充的构成方式，若是直线段则转换是精确的<br>若转换前后的坐标系尺度变化较大，填充由于密度等参数可能导致视觉效果差异较大</td></tr><tr><td>块参照（<code>Insert</code>）</td><td>块有两种方案：<br>多部件块（块名以SBOX开头）：将对块定义进行逐点转换，由于直接修改块定义，将不支持对块的多个引用<br>其他块：按基点转换后再进行尺度缩放</td></tr></tbody></table><p>注意：</p><ul><li>检查未显示的图元，诸如图案错误的填充，字体缺失的文字；</li><li>转换时请确保图层没有冻结，锁定等情况；</li><li>投影变换的目标：在确保精度的前提下，尽可能保证转换前后视觉效果一致性；</li><li>进行坐标转换后，由于坐标系尺度单位的不同（如：地理坐标系的<code>度</code>和投影坐标系的<code>米</code>），转换前后的图元视觉效果可能有差异，诸如：多段线的线宽、填充的密度；</li></ul><h2 id="分析工具" tabindex="-1"><a class="header-anchor" href="#分析工具" aria-hidden="true">#</a> 分析工具</h2><ul><li><p>缓冲区</p><p>命令：<code>BFF</code></p></li><li><p>包络矩形</p><p>命令：<code>BEnv</code></p></li><li><p>最小凸包</p><p>命令：<code>BCH</code></p></li><li><p>最小宽度外接矩形</p><p>命令：<code>BMWR</code></p></li><li><p>最小面积外接矩形</p><p>命令：<code>BMAR</code></p></li><li><p>最大面积内接矩形</p><p>命令：<code>BMIR</code></p></li><li><p>最大面积四边形</p><p>命令：<code>BMAP</code></p></li><li><p>最小外接圆</p><p>命令：<code>BMBC</code></p></li><li><p>最大内接圆</p><p>命令：<code>BMIC</code></p></li><li><p>融合线</p><p>命令：<code>LD</code></p></li><li><p>融合面</p><p>命令：<code>PD</code></p></li><li><p>构建泰森多边形</p><p>命令：<code>BVD</code></p></li><li><p>构建三角网</p><p>命令：<code>BTIN</code></p></li><li><p>构建凹包</p><p>命令：<code>CCH</code></p></li><li><p>构建边界(分组)</p><p>命令：<code>CCHG</code></p></li></ul>',74),A=[T];function P(q,M){return d(),e("div",null,A)}const F=t(D,[["render",P],["__file","03Spatial.html.vue"]]);export{F as default};
